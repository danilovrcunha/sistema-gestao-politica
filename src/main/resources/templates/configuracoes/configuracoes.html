<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações</title>
    <link rel="stylesheet" href="/configuracoes/style.css">
    <link rel="stylesheet" href="/AssistenteIA/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<div class="container">
    <aside class="sidebar">
        <div class="logo">
            <h1>Menu Principal</h1>
        </div>
        <nav class="nav-menu">
            <ul>
                <li><a href="/home"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="/acoes"><i class="fas fa-chart-line"></i> Ações</a></li>
                <li><a href="/kanban"><i class="fas fa-tasks"></i> Gestão de Tarefas</a></li>
                <li><a href="/financeiro"><i class="fas fa-dollar-sign"></i> Financeiro</a></li>
                <li class="active"><a href="#"><i class="fas fa-cog"></i> Configurações</a></li>
                <li id="assistant-toggle-btn"><a href="#"><i class="fas fa-robot"></i> Assistente Virtual I.A.</a></li>
            </ul>
        </nav>
        <div class="logout">
            <a href="/login/login.html"><i class="fas fa-sign-out-alt"></i> Sair</a>
        </div>
    </aside>

    <main class="main-content">
        <header class="header">
            <div class="header-title">
                <i class="fas fa-cog"></i>
                <h2>Configurações</h2>
            </div>
            <p id="headerDescription">Gerencie suas configurações de usuário</p>
        </header>

        <section class="config-container">
            <nav class="config-tabs">
                <button class="tab-button active" data-tab="cadastro">Cadastro</button>
                <button class="tab-button" data-tab="seguranca">Segurança</button>
                <button class="tab-button" data-tab="administracao">Administração de Usuários</button>
            </nav>

            <div class="tab-content-wrapper">

                <!-- ===================== ABA CADASTRO ===================== -->
                <div class="tab-pane active" id="cadastro">
                    <h3 class="pane-title">Cadastro de Usuário</h3>
                    <form id="cadastroForm" class="config-form">

                        <label for="nome">Nome</label>
                        <input type="text" id="nome" name="nome" placeholder="Digite o nome completo">

                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email" placeholder="email@exemplo.com">

                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" placeholder="Digite uma senha temporária">

                        <label for="tipoUsuario">Tipo de Usuário</label>
                        <select id="tipoUsuario" name="tipoUsuario" required>
                            <option value="">Selecione...</option>
                            <option value="USER">Usuário Comum</option>
                            <option value="ADMIN">Administrador</option>
                        </select>
                        <div id="gabineteSelectorContainer" class="form-group" style="display: none;">
                            <label for="gabineteId">Vincular ao Gabinete</label>
                            <select id="gabineteId" name="gabineteId">
                                <option value="">Carregando gabinetes...</option>
                            </select>
                        </div>

                        <div class="save-button-container">
                            <button type="submit" class="salvar-btn">Cadastrar Usuário</button>
                        </div>
                    </form>
                </div>

                <!-- ===================== ABA SEGURANÇA ===================== -->
                <div class="tab-pane" id="seguranca">
                    <h3 class="pane-title">Alterar Senha</h3>
                    <p class="security-text">Preencha os campos abaixo para alterar sua senha com segurança.</p>

                    <form id="segurancaForm" class="config-form security-form">
                        <label for="emailVinculado">Email Vinculado</label>
                        <input type="email" id="emailVinculado" name="emailVinculado" placeholder="email@exemplo.com" readonly>

                        <label for="senhaAtual">Senha atual</label>
                        <div class="password-group">
                            <input type="password" id="senhaAtual" name="senhaAtual" placeholder="Digite sua senha" required>
                            <i class="fas fa-eye toggle-password" data-target="senhaAtual"></i>
                        </div>

                        <label for="novaSenha">Nova senha</label>
                        <div class="password-group">
                            <input type="password" id="novaSenha" name="novaSenha" placeholder="Digite sua nova senha" required>
                            <i class="fas fa-eye toggle-password" data-target="novaSenha"></i>
                        </div>

                        <label for="confirmarSenha">Confirmar nova senha</label>
                        <div class="password-group">
                            <input type="password" id="confirmarSenha" name="confirmarSenha" placeholder="Confirme sua nova senha" required>
                            <i class="fas fa-eye toggle-password" data-target="confirmarSenha"></i>
                        </div>

                        <div class="save-button-container">
                            <button type="submit" class="salvar-btn">Alterar Senha</button>
                        </div>
                    </form>
                </div>

                <!-- ===================== ABA ADMINISTRAÇÃO ===================== -->
                <div class="tab-pane" id="administracao">
                    <div class="admin-header-row">
                        <h3 class="pane-title">Administração de Usuários</h3>
                        <button class="action-btn update-list-btn" id="atualizarListaBtn">Atualizar Lista</button>
                    </div>

                    <p class="admin-info-text">Gerencie usuários e permissões do sistema.</p>

                    <div class="table-container-admin">
                        <table class="data-table-admin">
                            <thead>
                            <tr>
                                <th>Nome</th>
                                <th>E-mail</th>
                                <th>Perfil</th>
                            </tr>
                            </thead>
                            <tbody id="usuariosTableBody"></tbody>
                        </table>
                    </div>


                    <div class="admin-actions-footer">
                        <button class="action-btn edit-perms-btn">
                            <i class="fas fa-edit"></i> Editar Permissões
                        </button>
                        <button class="action-btn remove-user-btn">
                            <i class="fas fa-trash-alt"></i> Remover Usuário
                        </button>
                    </div>
                </div>

            </div>
        </section>
    </main>
</div>

<!-- ============== MODAL DE PERMISSÕES ============== -->
<div id="permissionsModal" class="modal-perms">
    <div class="modal-content-perms">
        <span class="close-btn-perms">&times;</span>
        <h2 class="modal-title-perms" id="modalTitle">Permissões</h2>

        <h3 class="control-title">Controle de Acesso</h3>

        <form id="permissionsForm" class="permissions-form">

            <div class="permissions-header">
                <span class="col-title">Página / Visualizar</span>
                <span class="col-edit-title">Permitir Edição</span>
            </div>

            <div class="permission-list">

                <div class="permission-row">
                    <label class="access-label">
                        <input type="checkbox" name="dashboard_access" class="access-cb"> Dashboard
                    </label>
                    <label class="edit-label">
                        <input type="checkbox" name="dashboard_edit" class="edit-cb">
                    </label>
                </div>

                <div class="permission-row">
                    <label class="access-label">
                        <input type="checkbox" name="acoes_access" class="access-cb"> Ações
                    </label>
                    <label class="edit-label">
                        <input type="checkbox" name="acoes_edit" class="edit-cb">
                    </label>
                </div>

                <div class="permission-row">
                    <label class="access-label">
                        <input type="checkbox" name="kanban_access" class="access-cb"> Gestão de Tarefas
                    </label>
                    <label class="edit-label">
                        <input type="checkbox" name="kanban_edit" class="edit-cb">
                    </label>
                </div>

                <div class="permission-row">
                    <label class="access-label">
                        <input type="checkbox" name="financeiro_access" class="access-cb"> Financeiro
                    </label>
                    <label class="edit-label">
                        <input type="checkbox" name="financeiro_edit" class="edit-cb">
                    </label>
                </div>

                <div class="permission-row">
                    <label class="access-label">
                        <input type="checkbox" name="configuracoes_access" class="access-cb"> Configurações
                    </label>
                    <label class="edit-label">
                        <input type="checkbox" name="configuracoes_edit" class="edit-cb">
                    </label>
                </div>

            </div>

            <div class="modal-footer-perms">
                <button type="submit" class="salvar-btn">Salvar Permissões</button>
            </div>
        </form>
    </div>
</div>
<!-- ============== ASSISTENTE IA ============== -->
<div class="assistant-chat-panel" id="assistantChatPanel">
    <div class="chat-header">
        <h4>Assistente I.A.</h4>
        <button class="close-chat-btn" id="closeChatBtn">&times;</button>
    </div>

    <div class="chat-body" id="chatBody">
        <div class="chat-message-ai">
            Olá! Sou seu assistente de gerenciamento. Como posso te ajudar hoje?
        </div>
    </div>

    <div class="chat-footer">
        <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
        <button id="sendChatBtn" class="send-chat-btn">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>

<!-- ================= SCRIPTS ================= -->
<script src="/configuracoes/script.js"></script>
<script src="/AssistenteIA/script.js"></script>
</body>
</html>
